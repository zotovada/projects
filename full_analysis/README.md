# Анализ продаж и пользовательской активности сервиса Яндекс Афиша

## Описание проекта
Проект посвящён аналитике данных сервиса **Яндекс Афиша** за лето–осень 2024 года. Отдел продукта заметил, что продажи билетов на одни мероприятия растут, а на другие снижаются. Причины изменений пока неясны: возможно, это связано с сезонностью, сменой интересов аудитории или особенностями поведения пользователей на разных устройствах. Необходимо предоставить продуктовой команде детальную аналитику для подготовки к зимнему периоду распродаж.  

---

## Цель проекта
Провести анализ данных Яндекс Афиши за лето–осень 2024 года, чтобы выявить инсайты об изменении пользовательских предпочтений, оценить влияние сезонности на продажи и активность пользователей, а также проверить гипотезы о различиях в поведении пользователей мобильных и стационарных устройств.

---

## Основные этапы проекта
В рамках проекта выполняются следующие этапы:
- **SQL-этап**: расчёт ключевых метрик и подготовка данных для анализа.
- **Дашборд в DataLens**: визуализация ключевых бизнес-показателей.
- **Python-этап**: исследовательский анализ данных и проверка гипотез.

---

## Задачи проекта
1. **SQL-этап**:
   - изучить структуру и содержание данных;
   - рассчитать ключевые метрики продукта (выручка, количество заказов, средний чек, уникальные пользователи);
   - подготовить данные для дальнейшего анализа в Python.

2. **Дашборд в DataLens**:
   - визуализировать динамику ключевых показателей по неделям;
   - отобразить структуру выручки по типу устройства и мероприятия;
   - выделить топ-сегменты по регионам, событиям и площадкам;
   - составить аналитическую записку с ключевыми выводами и рекомендациями.

3. **Python-этап**:
   - изучить распределение заказов по категориям (тип мероприятия, тип устройства, возрастной рейтинг);
   - проанализировать осеннюю активность пользователей по дням и изучить недельную цикличность;
   - определить топ-категории по числу мероприятий, заказов и выручке в разрезе регионов и билетных партнёров;
   - проверить гипотезы:
     - среднее количество заказов на одного пользователя мобильного приложения выше по сравнению с пользователями ПК;
     - среднее время между заказами пользователей мобильных приложений выше по сравнению с пользователями ПК.
   - сформулировать выводы и рекомендации для команды продукта.

---

## Структура проекта
Основная папка проекта `yandex_afisha` содержит следующие подпапки:

### 01_sql
SQL-скрипты для работы с данными:
- `01_explore_data.sql` — знакомство с данными;
- `02_key_metrics.sql` — расчёт ключевых метрик продукта;
- `04_extract_for_python.sql` — подготовка данных для анализа в Python.

### 02_datalens
- `03_yandex_afisha_dashboard.md` — описание и ссылка на аналитический дашборд в Yandex DataLens.

### 03_python
- `05_yandex_afisha_eda.ipynb` — исследовательский анализ данных и проверка гипотез с помощью Python.

---

## Описание данных
Данные состоят из трёх датасетов:
- `final_tickets_orders_df.csv` содержит данные обо всех заказах билетов, совершённых с двух типов устройств — мобильных и ПК;
- `final_tickets_events_df.csv` содержит данные о событиях, включая регион, город и площадку проведения мероприятия;
- `final_tickets_tenge_df.csv` содержит данные о курсе тенге к рублю за 2024 год. Значения в рублях представлено для 100 тенге.

---

## Используемые инструменты и библиотеки
- **SQL / DBeaver** — работа с базой данных и расчёт ключевых метрик;
- **Yandex DataLens** — построение аналитического дашборда;
- **Python** — исследовательский анализ и проверка гипотез;
- Основные библиотеки Python: `pandas`, `matplotlib`, `seaborn`, `scipy.stats`.

---

## Главные выводы

### Динамика и сезонные предпочтения

- Количество заказов с июня по октябрь выросло почти втрое (с 34 до 100 тыс.).
- Концерты и театр остаются ключевыми категориями оба сезона. Однако летом выше доля концертов (43% против 37% осенью), стендапа и выставок, а осенью — театра (25% против 20% летом), спорта и ёлок. Это отражает сезонность: лето — сезон концертов, осень — театральных и спортивных мероприятий, а билеты на ёлки покупают заранее к праздникам.
- Средняя выручка с билета осенью снизилась почти для всех типов мероприятий (театр −18%, концерты −12%), кроме выставок и стендапа. Это может быть связано с ростом недорогих камерных событий и акциями перед Новым годом.

### Осенняя активность пользователей

- С начала осени по конец октября наблюдается рост числа заказов (с 1,3 тыс. до почти 6 тыс.) и активных пользователей (от 600 до 1,3 тыс.). Среднее число заказов на пользователя (2-3) и средняя выручка с билета (ок. 190 ₽) остаются стабильными.
- Пик количества заказов приходится на вторник (ок. 3,5 тыс), а пик количества активных пользователей — на пятницу (ок. 1 тыс). 
- При этом в будни средняя выручка с билета ниже, а к выходным этот показатель растёт и достигает 195-200 руб.
- Вероятно, в будни пользователи совершают массовые и дешёвые покупки, а в выходные — осознанные и более дорогие.

### Регионы и билетные партнёры

- Ок. 50% событий и заказов пришлось на четыре региона: Каменевский (25% событий, 28% заказов), Североярская область (16% событий, 12% заказов), Широковская область (5% событий, 5% заказов) и Светополянский округ (5% событий, 3% заказов).
- 90% выручки обеспечивают 10 крупнейших операторов, лидируют «Билеты без проблем» (16% выручки, 16% событий и 19% заказов), «Мой билет» (14% выручки при 6% событий и 12% заказов) и «Облачко» (13% выручки, 8% событий и 9% заказов).
- Это указывает на высокую концентрацию рынка и зависимость от нескольких ключевых игроков.

### Разница в поведении пользователей разных устройств

- Мобильные пользователи совершают значимо больше заказов на человека (в среднем 9 заказов против 7 на ПК).
- Время между заказами у мобильных пользователей также выше, чем у пользователей ПК (в среднем 21 день против 15 на ПК).
- Выявленные различия можно объяснить разницей в удобстве интерфейсов и сценариях использования (мобильное приложение для спонтанных нерегулярных покупок, ПК — для осознанного планирования культурного досуга).

---

## Рекомендации

1. **Стимулировать регулярные покупки мобильных пользователей:** Мобильные пользователи активнее, но делают покупки нерегулярно. Стоит стимулировать повторные покупки через персональные рекомендации и бонусы за регулярные покупки.

2. **Продвигать сезонные события:** Осенью наблюдается рост интереса к театру, спорту и семейным мероприятиям. Чтобы увеличить продажи, можно усилить продвижение этих категорий через подборки и сезонные кампании.

3. **Работать с региональной диверсификацией:** Сконцентрированность выручки в нескольких регионах создаёт риски. Важно расширять сеть партнёров и событий в менее активных областях, чтобы меньше зависеть от топ-регионов.

4. **Развивать партнёрскую сеть:** Основная выручка приходится на нескольких крупных операторов. Важно укреплять сотрудничество с ними, а также помогать мелким партнёрам в продвижении своих событий — через маркетинговую поддержку, рекомендации и совместные акции. Это позволит расширять пул мероприятий и снижать зависимость от ключевых игроков.

5. **Продолжить мониторинг сезонности:** Повторный анализ в зимне-весенний период поможет уточнить закономерности спроса и на его основе корректировать маркетинговую стратегию, планировать акции и адаптировать ассортимент билетов.